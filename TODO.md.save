# TODO - Compauto-Next Improvement Checklist

> –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-10-18
> –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: **7.2/10**

## üìä –°–≤–æ–¥–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –°—Ç–∞—Ç—É—Å |
|-----------|--------|--------|
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | 8.5/10 | ‚úÖ –•–æ—Ä–æ—à–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ |
| –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (a11y) | 4/10 | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è |
| SEO | 7.5/10 | ‚úÖ –•–æ—Ä–æ—à–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ |
| UI/UX | 7/10 | ‚úÖ –•–æ—Ä–æ—à–æ |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | 8.5/10 | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 4/10 | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 7.5/10 | ‚úÖ –•–æ—Ä–æ—à–æ |

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ó–ê–î–ê–ß–ò (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–≤—ã–º–∏)

### üîí SECURITY-001: –£–±—Ä–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª:** `app/api/auth/authOptions.ts:15-41`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
**–í—Ä–µ–º—è:** 30 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** Console.log —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–∞—Ö –≤—Ö–æ–¥–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å user enumeration –∞—Ç–∞–∫–∏.

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:**
```typescript
// –°—Ç—Ä–æ–∫–∞ 15
console.log('üîê Attempting authorization for:', credentials?.email)
// –°—Ç—Ä–æ–∫–∞ 27
console.log('‚ùå User not found:', credentials.email)
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
if (process.env.NODE_ENV === 'development') {
  console.log('[DEBUG] Authorization attempt')
}
// –ò–õ–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π logger
```

**–†–∏—Å–∫–∏ –µ—Å–ª–∏ –Ω–µ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:** –£—Ç–µ—á–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö, —É–ø—Ä–æ—â–µ–Ω–∏–µ brute-force –∞—Ç–∞–∫

---

### üîç SEO-001: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è sitemap —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
**–§–∞–π–ª:** –°–æ–∑–¥–∞—Ç—å `app/sitemap.ts`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
**–í—Ä–µ–º—è:** 1-2 —á–∞—Å–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–µ–∫—É—â–∏–π sitemap —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ 2 URL (–≥–ª–∞–≤–Ω–∞—è + –∫–∞—Ç–∞–ª–æ–≥). –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// app/sitemap.ts
import { MetadataRoute } from 'next'
import prisma from './lib/prisma'

export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
  const products = await prisma.product.findMany({
    select: { slug: true, updatedAt: true }
  })

  return [
    {
      url: 'https://comp-auto.ru/',
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 1,
    },
    {
      url: 'https://comp-auto.ru/catalog',
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 0.8,
    },
    ...products.map(product => ({
      url: `https://comp-auto.ru/catalog/${product.slug}`,
      lastModified: product.updatedAt,
      changeFrequency: 'weekly' as const,
      priority: 0.7,
    }))
  ]
}
```

**–í–ª–∏—è–Ω–∏–µ:** –†–µ–∑–∫–∏–π —Ä–æ—Å—Ç –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤ –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤

---

### ‚ôø A11Y-001: –î–æ–±–∞–≤–∏—Ç—å labels –∫ –ø–æ–ª—è–º —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
**–§–∞–π–ª:** `app/admin/login/page.tsx:40-54`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ WCAG 2.1)
**–í—Ä–µ–º—è:** 30 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—è –≤–≤–æ–¥–∞ email –∏ –ø–∞—Ä–æ–ª—è –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å label —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ–æ—Ä–º—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–π –¥–ª—è screen readers.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```tsx
<input
  type="email"
  placeholder="Email"
  {...register('email')}
/>
```

**–†–µ—à–µ–Ω–∏–µ:**
```tsx
<div>
  <label htmlFor="email" className={styles.label}>
    Email
  </label>
  <input
    id="email"
    type="email"
    placeholder="–í–≤–µ–¥–∏—Ç–µ email"
    aria-required="true"
    aria-invalid={!!errors.email}
    {...register('email')}
  />
  {errors.email && (
    <span role="alert" className={styles.error}>
      {errors.email.message}
    </span>
  )}
</div>
```

**–í–ª–∏—è–Ω–∏–µ:** –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏, —É–ª—É—á—à–µ–Ω–∏–µ UX –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ —Å–∫—Ä–∏–Ω-—Ä–∏–¥–µ—Ä–∞–º–∏

---

### üîç SEO-002: –î–æ–±–∞–≤–∏—Ç—å Schema.org —Ä–∞–∑–º–µ—Ç–∫—É –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤
**–§–∞–π–ª:** `app/(site)/catalog/[slug]/page.tsx`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
**–í—Ä–µ–º—è:** 1-2 —á–∞—Å–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç JSON-LD —Ä–∞–∑–º–µ—Ç–∫–∞ Schema.org, —á—Ç–æ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç Google –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å rich snippets (–∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤) –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞.

**–†–µ—à–µ–Ω–∏–µ:**
```tsx
export default async function ProductPage({ params }: { params: { slug: string } }) {
  const product = await getProduct(params.slug)

  const jsonLd = {
    '@context': 'https://schema.org',
    '@type': 'Product',
    name: product.title,
    description: product.description,
    image: `https://comp-auto.ru${product.img}`,
    brand: {
      '@type': 'Brand',
      name: product.autoMark
    },
    offers: {
      '@type': 'Offer',
      url: `https://comp-auto.ru/catalog/${product.slug}`,
      priceCurrency: 'RUB',
      price: product.price,
      availability: 'https://schema.org/InStock',
      seller: {
 	       '@type': 'Organization',
        name: 'Komp-Auto'
      }
    },
    sku: product.slug,
    category: '–¢—É—Ä–±–æ–∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä—ã'
  }

  return (
    <>
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}
      />
      {/* –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
    </>
  )
}
```

**–í–ª–∏—è–Ω–∏–µ:** Rich snippets –≤ Google, –ø–æ–≤—ã—à–µ–Ω–∏–µ CTR –Ω–∞ 20-30%

---

## üü† –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

### üîí SECURITY-002: Rate limiting –Ω–∞ —Ñ–æ—Ä–º–µ –≤—Ö–æ–¥–∞ (client-side)
**–§–∞–π–ª:** `app/admin/login/page.tsx`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ç–∞–∫ –Ω–∞ —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
const [attempts, setAttempts] = useState(0)
const [blockUntil, setBlockUntil] = useState<number | null>(null)

const onSubmit = async (data: FormData) => {
  if (blockUntil && Date.now() < blockUntil) {
    const seconds = Math.ceil((blockUntil - Date.now()) / 1000)
    toast.error(`–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ ${seconds} —Å–µ–∫`)
    return
  }

  try {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞
  } catch (error) {
    const newAttempts = attempts + 1
    setAttempts(newAttempts)

    if (newAttempts >= 3) {
      const blockTime = Date.now() + 60000 // 1 –º–∏–Ω—É—Ç–∞
      setBlockUntil(blockTime)
      toast.error('–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 1 –º–∏–Ω—É—Ç—É.')
    }
  }
}
```

---

### üîí SECURITY-003: –í–∞–ª–∏–¥–∞—Ü–∏—è query –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ Zod
**–§–∞–π–ª:** `app/api/products/route.ts:140-156`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û–ø–∏—Å–∞–Ω–∏–µ:** Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ Prisma where —É—Å–ª–æ–≤–∏—è—Ö –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
import { z } from 'zod'

const productFilterSchema = z.object({
  autoMark: z.string().max(100).optional(),
  engineModel: z.string().max(100).optional(),
  compressor: z.string().max(100).optional(),
  search: z.string().max(200).optional(),
  skip: z.coerce.number().min(0).max(10000).default(0),
  take: z.coerce.number().min(1).max(100).default(12),
})

export async function GET(req: NextRequest) {
  try {
    const url = new URL(req.url)

    const validatedParams = productFilterSchema.parse({
      autoMark: url.searchParams.get('autoMark'),
      engineModel: url.searchParams.get('engineModel'),
      compressor: url.searchParams.get('compressor'),
      search: url.searchParams.get('search'),
      skip: url.searchParams.get('skip'),
      take: url.searchParams.get('take'),
    })

    // –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å validatedParams –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
  } catch (error) {
    if (error instanceof z.ZodError) {
      return NextResponse.json(
        { error: 'Invalid query parameters', details: error.errors },
        { status: 400 }
      )
    }
  }
}
```

---

### ‚öõÔ∏è ARCH-001: –°–æ–∑–¥–∞—Ç—å Error Boundary –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
**–§–∞–π–ª:** –°–æ–∑–¥–∞—Ç—å `app/components/errorBoundary/index.tsx`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û–ø–∏—Å–∞–Ω–∏–µ:** React –æ—à–∏–±–∫–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –∫—Ä–∞—Ö—É –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –∏–∑–æ–ª—è—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

**–†–µ—à–µ–Ω–∏–µ:**
```tsx
'use client'

import { Component, ReactNode } from 'react'
import styles from './errorBoundary.module.scss'

interface Props {
  children: ReactNode
  fallback?: ReactNode
}

interface State {
  hasError: boolean
  error?: Error
}

export default class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props)
    this.state = { hasError: false }
  }

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error }
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    console.error('ErrorBoundary caught an error:', error, errorInfo)

    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ error tracking (Sentry, etc.)
    // sendToErrorTracking(error, errorInfo)
  }

  render() {
    if (this.state.hasError) {
      return this.props.fallback || (
        <div className={styles.errorContainer}>
          <h2>–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h2>
          <p>–ú—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã.</p>
          <button onClick={() => window.location.reload()}>
            –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
          </button>
        </div>
      )
    }

    return this.props.children
  }
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ layout.tsx:**
```tsx
import ErrorBoundary from './components/errorBoundary'

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        <ErrorBoundary>
          {children}
        </ErrorBoundary>
      </body>
    </html>
  )
}
```

---

### ‚ôø A11Y-002: –ò—Å–ø—Ä–∞–≤–∏—Ç—å alt —Ç–µ–∫—Å—Ç —É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≥–∞–ª–µ—Ä–µ–∏
**–§–∞–π–ª:** `app/(site)/catalog/[slug]/components/productGallery/index.tsx:53,60,68,84`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô
**–í—Ä–µ–º—è:** 30 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≥–∞–ª–µ—Ä–µ–µ –∏–º–µ—é—Ç –ø—É—Å—Ç–æ–π alt="", —á—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç WCAG 2.1 Level A.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```tsx
<Image src={mainImage} alt="" />
```

**–†–µ—à–µ–Ω–∏–µ:**
```tsx
<Image
  src={mainImage}
  alt={`${title} - –æ—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ`}
/>

{gallery.map((img, index) => (
  <Image
    key={index}
    src={img}
    alt={`${title} - —Ñ–æ—Ç–æ ${index + 1}`}
  />
))}
```

---

### ‚ôø A11Y-003: Keyboard navigation –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
**–§–∞–π–ª:** `app/components/filterList/index.tsx:14-37`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û–ø–∏—Å–∞–Ω–∏–µ:** –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–º–µ—é—Ç onClick, –Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```tsx
<li onClick={() => onSelect(item.value)}>
  {item.label}
</li>
```

**–†–µ—à–µ–Ω–∏–µ:**
```tsx
<li
  role="button"
  tabIndex={0}
  onClick={() => onSelect(item.value)}
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault()
      onSelect(item.value)
    }
  }}
  aria-label={`–í—ã–±—Ä–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä: ${item.label}`}
>
  {item.label}
</li>
```

---

### üé® UX-001: Debouncing –¥–ª—è –ø–æ–∏—Å–∫–∞
**–§–∞–π–ª:** `app/utils/useCatalog.ts:23-52`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô
**–í—Ä–µ–º—è:** 45 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞–∂–¥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à–∏ –≤—ã–∑—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL –∏ –∑–∞–ø—Ä–æ—Å –∫ API.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
import { useState, useEffect, useCallback } from 'react'
import { debounce } from 'lodash' // –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

export default function useCatalog() {
  const [searchInput, setSearchInput] = useState('')
  const [debouncedSearch, setDebouncedSearch] = useState('')

  // Debounce –Ω–∞ 300ms
  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedSearch(searchInput)
    }, 300)

    return () => clearTimeout(timer)
  }, [searchInput])

  // –û–±–Ω–æ–≤–ª—è—Ç—å URL —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ debounce
  useEffect(() => {
    if (debouncedSearch !== searchParams.get('search')) {
      const params = new URLSearchParams(searchParams)
      if (debouncedSearch) {
        params.set('search', debouncedSearch)
      } else {
        params.delete('search')
      }
      router.push(`?${params.toString()}`)
    }
  }, [debouncedSearch])

  return {
    searchInput,
    setSearchInput,
    // ...
  }
}
```

---

### üîí SECURITY-004: Timing-safe —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–ª—è CRON_SECRET
**–§–∞–π–ª:** `app/api/cron/cleanup/route.ts:16-30`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô
**–í—Ä–µ–º—è:** 15 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°—Ç—Ä–æ–∫–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `!==` –ø–æ–¥–≤–µ—Ä–∂–µ–Ω–æ timing attacks.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```typescript
if (providedToken !== expectedToken) {
  return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })
}
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
import { timingSafeEqual } from 'crypto'

function constantTimeCompare(a: string, b: string): boolean {
  try {
    const bufA = Buffer.from(a, 'utf8')
    const bufB = Buffer.from(b, 'utf8')

    if (bufA.length !== bufB.length) {
      return false
    }

    return timingSafeEqual(bufA, bufB)
  } catch {
    return false
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
if (!constantTimeCompare(providedToken || '', expectedToken)) {
  return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })
}
```

---

## üü° –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

### üîí SECURITY-005: Session timeout –¥–ª—è NextAuth
**–§–∞–π–ª:** `app/api/auth/authOptions.ts:51`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 15 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–µ—Å—Å–∏–∏ –∂–∏–≤—É—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ, —á—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ –ø—Ä–∏ –∫—Ä–∞–∂–µ —Ç–æ–∫–µ–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
export const authOptions: AuthOptions = {
  // ...
  session: {
    strategy: 'jwt',
    maxAge: 24 * 60 * 60, // 24 —á–∞—Å–∞
    updateAge: 60 * 60, // –û–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–∫–µ–Ω –∫–∞–∂–¥—ã–π —á–∞—Å
  },
  // ...
}
```

---

### ‚öõÔ∏è ARCH-002: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞
**–§–∞–π–ª—ã:** –ú–Ω–æ–∂–µ—Å—Ç–≤–æ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 1-2 —á–∞—Å–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:** Hardcoded –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ –≤—Å–µ–º—É –∫–æ–¥—É.

**–°–æ–∑–¥–∞—Ç—å:** `app/constants/index.ts`
```typescript
export const BREAKPOINTS = {
  mobile: 768,
  tablet: 1024,
  desktop: 1200,
} as const

export const PAGINATION = {
  itemsPerPage: 12,
  maxItems: 1000,
} as const

export const SLIDER = {
  maxItems: 8,
  autoplayDelay: 3000,
} as const

export const FILE_UPLOAD = {
  maxSizeMB: 2,
  maxSizeBytes: 2 * 1024 * 1024,
  allowedMimeTypes: ['image/jpeg', 'image/png', 'image/webp'] as const,
} as const

export const RATE_LIMIT = {
  authAttempts: 5,
  authWindowMs: 60 * 1000,
  authBlockMs: 15 * 60 * 1000,
} as const
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { PAGINATION } from '@/constants'

const ITEMS_PER_PAGE = PAGINATION.itemsPerPage
```

---

### üìä OBSERVABILITY-001: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
**–§–∞–π–ª:** –°–æ–∑–¥–∞—Ç—å `app/lib/logger.ts`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:** Console.log –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç –æ—Ç–ª–∞–¥–∫—É –≤ production.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// app/lib/logger.ts
type LogLevel = 'debug' | 'info' | 'warn' | 'error'

interface LogContext {
  [key: string]: unknown
}

class Logger {
  private isDevelopment = process.env.NODE_ENV === 'development'

  private log(level: LogLevel, message: string, context?: LogContext) {
    const timestamp = new Date().toISOString()
    const logEntry = {
      timestamp,
      level,
      message,
      ...context,
    }

    if (this.isDevelopment) {
      console.log(`[${timestamp}] [${level.toUpperCase()}] ${message}`, context || '')
    } else {
      // –í production –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ —Å–µ—Ä–≤–∏—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
      console.log(JSON.stringify(logEntry))
    }
  }

  debug(message: string, context?: LogContext) {
    if (this.isDevelopment) {
      this.log('debug', message, context)
    }
  }

  info(message: string, context?: LogContext) {
    this.log('info', message, context)
  }

  warn(message: string, context?: LogContext) {
    this.log('warn', message, context)
  }

  error(message: string, error?: Error, context?: LogContext) {
    this.log('error', message, {
      ...context,
      error: error?.message,
      stack: error?.stack,
    })
  }
}

export const logger = new Logger()
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { logger } from '@/lib/logger'

// –í–º–µ—Å—Ç–æ console.log
logger.info('Product created', { productId: product.id, userId: user.id })
logger.error('Failed to upload image', error, { filename: file.name })
```

---

### üé® UX-002: Loading skeleton –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
**–§–∞–π–ª:** `app/components/product/index.tsx:17-24`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –±–µ–∑ placeholder, —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø–ª–æ—Ö–æ–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```tsx
import { useState } from 'react'
import styles from './product.module.scss'

export default function Product({ product }) {
  const [imageLoaded, setImageLoaded] = useState(false)

  return (
    <div className={styles.imageWrapper}>
      {!imageLoaded && (
        <div className={styles.skeleton} />
      )}
      <Image
        src={product.img}
        alt={product.title}
        onLoad={() => setImageLoaded(true)}
        className={imageLoaded ? styles.loaded : styles.loading}
      />
    </div>
  )
}
```

```scss
// product.module.scss
.imageWrapper {
  position: relative;
  overflow: hidden;
}

.skeleton {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    #f0f0f0 25%,
    #e0e0e0 50%,
    #f0f0f0 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.loading {
  opacity: 0;
}

.loaded {
  opacity: 1;
  transition: opacity 0.3s;
}
```

---

### ‚öõÔ∏è ARCH-003: AbortController –¥–ª—è fetch –∑–∞–ø—Ä–æ—Å–æ–≤
**–§–∞–π–ª:** `app/utils/useCatalog.ts`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û–ø–∏—Å–∞–Ω–∏–µ:** Fetch –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É—Ç–µ—á–∫–∞–º –ø–∞–º—è—Ç–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
useEffect(() => {
  const abortController = new AbortController()

  async function fetchProducts() {
    try {
      const response = await fetch('/api/products', {
        signal: abortController.signal
      })
      const data = await response.json()
      setProducts(data)
    } catch (error) {
      if (error.name === 'AbortError') {
        console.log('Fetch aborted')
      } else {
        console.error('Fetch error:', error)
      }
    }
  }

  fetchProducts()

  return () => {
    abortController.abort()
  }
}, [/* dependencies */])
```

---

### üé® UX-003: –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ dropdown –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
**–§–∞–π–ª:** `app/components/filters/index.tsx:23`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û–ø–∏—Å–∞–Ω–∏–µ:** Dropdown –º–æ–∂–µ—Ç –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã viewport –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
import { useEffect, useRef, useState } from 'react'

export default function Filters() {
  const dropdownRef = useRef<HTMLDivElement>(null)
  const [dropdownPosition, setDropdownPosition] = useState<'bottom' | 'top'>('bottom')

  useEffect(() => {
    if (!isOpen || !dropdownRef.current) return

    const rect = dropdownRef.current.getBoundingClientRect()
    const viewportHeight = window.innerHeight

    // –ï—Å–ª–∏ dropdown –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è —Å–Ω–∏–∑—É, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–≤–µ—Ä—Ö—É
    if (rect.bottom > viewportHeight) {
      setDropdownPosition('top')
    } else {
      setDropdownPosition('bottom')
    }
  }, [isOpen])

  return (
    <div
      ref={dropdownRef}
      className={`${styles.dropdown} ${styles[dropdownPosition]}`}
    >
      {/* —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ */}
    </div>
  )
}
```

---

### üìä OBSERVABILITY-002: Web Vitals tracking
**–§–∞–π–ª:** `app/layout.tsx`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 30 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Core Web Vitals (LCP, FID, CLS).

**–†–µ—à–µ–Ω–∏–µ:**
```tsx
// app/components/webVitals.tsx
'use client'

import { useReportWebVitals } from 'next/web-vitals'

export function WebVitals() {
  useReportWebVitals((metric) => {
    // –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
    if (window.gtag) {
      window.gtag('event', metric.name, {
        value: Math.round(metric.value),
        metric_id: metric.id,
        metric_delta: metric.delta,
      })
    }

    // –ò–ª–∏ –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    console.log(metric)
  })

  return null
}
```

```tsx
// app/layout.tsx
import { WebVitals } from './components/webVitals'

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        <WebVitals />
        {children}
      </body>
    </html>
  )
}
```

---

### üîç SEO-003: Breadcrumb Schema.org —Ä–∞–∑–º–µ—Ç–∫–∞
**–§–∞–π–ª:** `app/(site)/catalog/[slug]/page.tsx`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 30 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç breadcrumb —Ä–∞–∑–º–µ—Ç–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–æ–∏—Å–∫–æ–≤–æ–π –≤—ã–¥–∞—á–µ.

**–†–µ—à–µ–Ω–∏–µ:**
```tsx
const breadcrumbJsonLd = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    {
      '@type': 'ListItem',
      position: 1,
      name: '–ì–ª–∞–≤–Ω–∞—è',
      item: 'https://comp-auto.ru/'
    },
    {
      '@type': 'ListItem',
      position: 2,
      name: '–ö–∞—Ç–∞–ª–æ–≥',
      item: 'https://comp-auto.ru/catalog'
    },
    {
      '@type': 'ListItem',
      position: 3,
      name: product.title,
      item: `https://comp-auto.ru/catalog/${product.slug}`
    }
  ]
}

return (
  <>
    <script
      type="application/ld+json"
      dangerouslySetInnerHTML={{ __html: JSON.stringify(breadcrumbJsonLd) }}
    />
  </>
)
```

---

## üü¢ –ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

### ‚ôø A11Y-004: Focus indicators –≤ CSS
**–§–∞–π–ª—ã:** –í—Å–µ SCSS –º–æ–¥—É–ª–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —è–≤–Ω—ã–µ focus —Å—Ç–∏–ª–∏ –¥–ª—è keyboard navigation.

**–†–µ—à–µ–Ω–∏–µ:**
```scss
// app/globals.scss
*:focus-visible {
  outline: 2px solid #0066cc;
  outline-offset: 2px;
}

button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible {
  outline: 2px solid #0066cc;
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.1);
}
```

---

### üîí SECURITY-006: CORS headers –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**–§–∞–π–ª:** `middleware.ts`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 30 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —è–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CORS.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// middleware.ts
const response = NextResponse.next()

// –ï—Å–ª–∏ –Ω—É–∂–µ–Ω CORS –¥–ª—è API
if (pathname.startsWith('/api/')) {
  response.headers.set('Access-Control-Allow-Origin', 'https://comp-auto.ru')
  response.headers.set('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS')
  response.headers.set('Access-Control-Allow-Headers', 'Content-Type, Authorization')
  response.headers.set('Access-Control-Max-Age', '86400')
}
```

---

### üé® UX-004: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π - —É–±—Ä–∞—Ç—å unoptimized
**–§–∞–π–ª:** `app/components/product/index.tsx:24`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û–ø–∏—Å–∞–Ω–∏–µ:** Prop `unoptimized` –æ—Ç–∫–ª—é—á–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é Next.js Image.

**–†–µ—à–µ–Ω–∏–µ:**
```tsx
// BEFORE
<Image
  src={img}
  alt={title}
  width={400}
  height={300}
  unoptimized  // ‚Üê –£–î–ê–õ–ò–¢–¨
/>

// AFTER
<Image
  src={img}
  alt={title}
  width={400}
  height={300}
  sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 400px"
  loading="lazy"
/>
```

---

### ‚öõÔ∏è ARCH-004: –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É fetching –≤ shared hook
**–§–∞–π–ª—ã:** `app/admin/hooks/useAdminProducts.ts`, `app/utils/useCatalog.ts`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// app/hooks/useProducts.ts
export function useProducts(options?: {
  filters?: ProductFilters
  pagination?: { skip: number; take: number }
}) {
  const [products, setProducts] = useState<Product[]>([])
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState<Error | null>(null)

  useEffect(() => {
    const abortController = new AbortController()

    async function fetchProducts() {
      setLoading(true)
      try {
        const params = new URLSearchParams()
        // ... –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ query string

        const response = await fetch(`/api/products?${params}`, {
          signal: abortController.signal
        })
        const data = await response.json()
        setProducts(data)
      } catch (err) {
        if (err.name !== 'AbortError') {
          setError(err as Error)
        }
      } finally {
        setLoading(false)
      }
    }

    fetchProducts()

    return () => abortController.abort()
  }, [/* deps */])

  return { products, loading, error }
}
```

---

### üîç SEO-004: –£–±—Ä–∞—Ç—å randomSuffix –∏–∑ slug (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
**–§–∞–π–ª:** `app/api/products/route.ts:76`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 30 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–ª—É—á–∞–π–Ω—ã–π —Å—É—Ñ—Ñ–∏–∫—Å –≤ slug –¥–µ–ª–∞–µ—Ç URL –º–µ–Ω–µ–µ —á–∏—Ç–∞–µ–º—ã–º–∏ –¥–ª—è SEO.

**–¢–µ–∫—É—â–µ–µ:** `gt1749v-volkswagen-tdi-19-a7x9k`
**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** `gt1749v-volkswagen-tdi-19`

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –í–º–µ—Å—Ç–æ randomSuffix –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ID –∏–ª–∏ —É–±—Ä–∞—Ç—å —Å–æ–≤—Å–µ–º
const slug = slugify(`${title} ${autoMark} ${engineModel}`, { lower: true })

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
const existing = await prisma.product.findUnique({ where: { slug } })
if (existing) {
  // –î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–æ–ª–ª–∏–∑–∏–∏
  const count = await prisma.product.count({
    where: { slug: { startsWith: slug } }
  })
  slug = `${slug}-${count + 1}`
}
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### TEST-001: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Jest/Vitest –¥–ª—è unit —Ç–µ—Å—Ç–æ–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 3-4 —á–∞—Å–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤.

**–ó–∞–¥–∞—á–∏:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Vitest: `pnpm add -D vitest @vitejs/plugin-react`
2. –°–æ–∑–¥–∞—Ç—å `vitest.config.ts`
3. –î–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ package.json: `"test": "vitest"`
4. –ù–∞–ø–∏—Å–∞—Ç—å –ø–µ—Ä–≤—ã–µ —Ç–µ—Å—Ç—ã:
   - `app/lib/imageVariants.test.ts` - —Ç–µ—Å—Ç—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞–±–æ—Ç—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
   - `app/utils/catalogUtils.test.ts` - —Ç–µ—Å—Ç—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç –∫–∞—Ç–∞–ª–æ–≥–∞
   - `app/api/lib/rateLimit.test.ts` - —Ç–µ—Å—Ç—ã rate limiting –ª–æ–≥–∏–∫–∏

**–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞:**
```typescript
// app/lib/imageVariants.test.ts
import { describe, it, expect } from 'vitest'
import { variantUrl, sourceUrl } from './imageVariants'

describe('imageVariants', () => {
  it('should generate correct variant URL', () => {
    const original = '/uploads/product-123.webp'
    expect(variantUrl(original, 'card')).toBe('/uploads/product-123__card.webp')
  })

  it('should strip existing variant suffix', () => {
    const original = '/uploads/product__detail.webp'
    expect(variantUrl(original, 'thumb')).toBe('/uploads/product__thumb.webp')
  })
})
```

---

### TEST-002: E2E —Ç–µ—Å—Ç—ã —Å Playwright
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 8-10 —á–∞—Å–æ–≤
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–ª–æ—É.

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–ª–æ—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
4. –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
5. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
6. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–¥—É–∫—Ç–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
pnpm add -D @playwright/test
pnpm exec playwright install
```

**–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞:**
```typescript
// e2e/admin-login.spec.ts
import { test, expect } from '@playwright/test'

test('admin login flow', async ({ page }) => {
  await page.goto('/admin/login')

  await page.fill('input[name="email"]', process.env.ADMIN_EMAIL!)
  await page.fill('input[name="password"]', process.env.ADMIN_PASSWORD!)
  await page.click('button[type="submit"]')

  await expect(page).toHaveURL('/admin')
  await expect(page.locator('h1')).toContainText('–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏')
})
```

---

### TEST-003: API Integration —Ç–µ—Å—Ç—ã
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 4-6 —á–∞—Å–æ–≤
**–û–ø–∏—Å–∞–Ω–∏–µ:** API routes –Ω–µ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏.

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- `/api/products` - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- `/api/upload` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- `/api/auth` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `/api/cleanup` - –æ—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// __tests__/api/products.test.ts
import { describe, it, expect, beforeAll } from 'vitest'

describe('GET /api/products', () => {
  it('should return products list', async () => {
    const response = await fetch('http://localhost:3000/api/products')
    expect(response.status).toBe(200)

    const data = await response.json()
    expect(data).toHaveProperty('products')
    expect(Array.isArray(data.products)).toBe(true)
  })

  it('should filter by autoMark', async () => {
    const response = await fetch('http://localhost:3000/api/products?autoMark=Volkswagen')
    const data = await response.json()

    data.products.forEach(p => {
      expect(p.autoMark).toBe('Volkswagen')
    })
  })
})
```

---

## üóÑÔ∏è DATABASE & PERFORMANCE

### DB-001: Connection pooling –¥–ª—è PostgreSQL
**–§–∞–π–ª:** `.env`, `app/lib/prisma.ts`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û–ø–∏—Å–∞–Ω–∏–µ:** Prisma –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π connection pool, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è production.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# .env
DATABASE_URL="postgresql://user:pass@localhost:5432/db?schema=public&connection_limit=10&pool_timeout=20"
```

```typescript
// app/lib/prisma.ts
const prisma = new PrismaClient({
  log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
  datasources: {
    db: {
      url: process.env.DATABASE_URL,
    },
  },
})

// Graceful shutdown
if (process.env.NODE_ENV === 'production') {
  process.on('beforeExit', async () => {
    await prisma.$disconnect()
  })
}
```

---

### PERF-001: –û—Ç–¥–µ–ª—å–Ω—ã–π endpoint –¥–ª—è filter options
**–§–∞–π–ª:** `app/utils/useCatalog.ts:107`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–æ 1000 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ñ–∏–ª—å—Ç—Ä–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// app/api/products/filters/route.ts
import { NextResponse } from 'next/server'
import prisma from '@/app/lib/prisma'

export async function GET() {
  try {
    // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    const [autoMarks, engineModels, compressors] = await Promise.all([
      prisma.product.findMany({
        select: { autoMark: true },
        distinct: ['autoMark'],
        orderBy: { autoMark: 'asc' }
      }),
      prisma.product.findMany({
        select: { engineModel: true },
        distinct: ['engineModel'],
        orderBy: { engineModel: 'asc' }
      }),
      prisma.product.findMany({
        select: { compressor: true },
        distinct: ['compressor'],
        orderBy: { compressor: 'asc' }
      })
    ])

    return NextResponse.json({
      autoMarks: autoMarks.map(p => p.autoMark),
      engineModels: engineModels.map(p => p.engineModel),
      compressors: compressors.map(p => p.compressor),
    })
  } catch (error) {
    return NextResponse.json({ error: 'Failed to fetch filters' }, { status: 500 })
  }
}
```

---

### PERF-002: Redis –¥–ª—è rate limiting –≤ production
**–§–∞–π–ª:** `app/api/lib/rateLimit.ts`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô (—É–∂–µ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ)
**–í—Ä–µ–º—è:** 4-6 —á–∞—Å–æ–≤
**–û–ø–∏—Å–∞–Ω–∏–µ:** In-memory Map –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ multi-instance deployments.

**–†–µ—à–µ–Ω–∏–µ:** –°–º. `RATE_LIMITING.md` —Å–µ–∫—Ü–∏—é "–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Redis"

---

### PERF-003: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 6-8 —á–∞—Å–æ–≤
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –≤ –ë–î, –Ω–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è.

**–û–ø—Ü–∏–∏:**
1. Next.js `unstable_cache` –¥–ª—è server components
2. React Query –¥–ª—è client-side –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
3. Redis –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –∫–µ—à–∞

**–ü—Ä–∏–º–µ—Ä —Å unstable_cache:**
```typescript
// app/lib/products.ts
import { unstable_cache } from 'next/cache'
import prisma from './prisma'

export const getProducts = unstable_cache(
  async (filters: ProductFilters) => {
    return await prisma.product.findMany({
      where: buildWhereClause(filters),
      orderBy: { createdAt: 'desc' }
    })
  },
  ['products'], // cache key
  {
    revalidate: 3600, // 1 —á–∞—Å
    tags: ['products']
  }
)

// –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
import { revalidateTag } from 'next/cache'

export async function createProduct(data: ProductData) {
  const product = await prisma.product.create({ data })
  revalidateTag('products')
  return product
}
```

---

## üìã –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### MISC-001: Health check endpoint
**–§–∞–π–ª:** –°–æ–∑–¥–∞—Ç—å `app/api/health/route.ts`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 30 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è load balancers.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
import { NextResponse } from 'next/server'
import prisma from '@/app/lib/prisma'

export async function GET() {
  try {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
    await prisma.$queryRaw`SELECT 1`

    return NextResponse.json({
      status: 'healthy',
      timestamp: new Date().toISOString(),
      uptime: process.uptime(),
      database: 'connected'
    })
  } catch (error) {
    return NextResponse.json({
      status: 'unhealthy',
      timestamp: new Date().toISOString(),
      database: 'disconnected',
      error: error.message
    }, { status: 503 })
  }
}
```

---

### MISC-002: Graceful shutdown handling
**–§–∞–π–ª:** –î–æ–±–∞–≤–∏—Ç—å –≤ `app/lib/prisma.ts`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 30 –º–∏–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// app/lib/prisma.ts
let shuttingDown = false

async function gracefulShutdown() {
  if (shuttingDown) return
  shuttingDown = true

  console.log('Shutting down gracefully...')

  try {
    await prisma.$disconnect()
    console.log('Database connections closed')
    process.exit(0)
  } catch (error) {
    console.error('Error during shutdown:', error)
    process.exit(1)
  }
}

process.on('SIGTERM', gracefulShutdown)
process.on('SIGINT', gracefulShutdown)
```

---

### MISC-003: Request logging –¥–ª—è audit trail
**–§–∞–π–ª:** `middleware.ts`
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û–ø–∏—Å–∞–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º endpoints.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// middleware.ts
export async function middleware(req: NextRequest) {
  const start = Date.now()

  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞

  const response = NextResponse.next()

  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
  if (pathname.startsWith('/api/') || pathname.startsWith('/admin/')) {
    const duration = Date.now() - start
    logger.info('Request processed', {
      method: req.method,
      path: pathname,
      duration,
      status: response.status,
      userAgent: req.headers.get('user-agent'),
      ip: getClientIp(req)
    })
  }

  return response
}
```

---

## üìä –ú–ï–¢–†–ò–ö–ò –ü–†–û–ì–†–ï–°–°–ê

### –ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º:
- üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ:** 4 –∑–∞–¥–∞—á–∏ (~4-6 —á–∞—Å–æ–≤)
- üü† **–í—ã—Å–æ–∫–∏–µ:** 6 –∑–∞–¥–∞—á (~8-10 —á–∞—Å–æ–≤)
- üü° **–°—Ä–µ–¥–Ω–∏–µ:** 11 –∑–∞–¥–∞—á (~15-20 —á–∞—Å–æ–≤)
- üü¢ **–ù–∏–∑–∫–∏–µ:** 11 –∑–∞–¥–∞—á (~20-25 —á–∞—Å–æ–≤)
- üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** 3 –∑–∞–¥–∞—á–∏ (~15-20 —á–∞—Å–æ–≤)

### –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** 6 –∑–∞–¥–∞—á
- ‚ôø **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** 4 –∑–∞–¥–∞—á–∏
- üîç **SEO:** 4 –∑–∞–¥–∞—á–∏
- üé® **UX:** 4 –∑–∞–¥–∞—á–∏
- ‚öõÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** 4 –∑–∞–¥–∞—á–∏
- üìä **Observability:** 2 –∑–∞–¥–∞—á–∏
- üóÑÔ∏è **Database/Performance:** 3 –∑–∞–¥–∞—á–∏
- üß™ **Testing:** 3 –∑–∞–¥–∞—á–∏
- üìã **Misc:** 3 –∑–∞–¥–∞—á–∏

**–û–±—â–µ–µ –≤—Ä–µ–º—è –Ω–∞ –≤—Å–µ –∑–∞–¥–∞—á–∏:** ~62-81 —á–∞—Å

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–û–í–ê–ù–ù–´–ô –ü–õ–ê–ù –í–ù–ï–î–†–ï–ù–ò–Ø

### –°–ø—Ä–∏–Ω—Ç 1 (–ù–µ–¥–µ–ª—è 1): –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è - 4-6 —á–∞—Å–æ–≤
- [x] SECURITY-001: –£–±—Ä–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ email
- [x] SEO-001: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π sitemap
- [x] A11Y-001: Labels –≤ —Ñ–æ—Ä–º–µ –≤—Ö–æ–¥–∞
- [x] SEO-002: Schema.org —Ä–∞–∑–º–µ—Ç–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–∫—Ä—ã—Ç—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ SEO

---

### –°–ø—Ä–∏–Ω—Ç 2 (–ù–µ–¥–µ–ª—è 2): –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å - 8-10 —á–∞—Å–æ–≤
- [x] SECURITY-002: Rate limiting –Ω–∞ —Ñ–æ—Ä–º–µ –≤—Ö–æ–¥–∞
- [x] SECURITY-003: –í–∞–ª–∏–¥–∞—Ü–∏—è query –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [x] SECURITY-004: Timing-safe —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
- [x] A11Y-002: Alt —Ç–µ–∫—Å—Ç –≤ –≥–∞–ª–µ—Ä–µ–µ
- [x] A11Y-003: Keyboard navigation –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
- [x] ARCH-001: Error Boundary

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç WCAG 2.1 Level A, —É—Å–∏–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞

---

### –°–ø—Ä–∏–Ω—Ç 3 (–ù–µ–¥–µ–ª—è 3): UX –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - 8-12 —á–∞—Å–æ–≤
- [x] UX-001: Debouncing –¥–ª—è –ø–æ–∏—Å–∫–∞
- [x] UX-002: Loading skeleton
- [x] ARCH-003: AbortController
- [x] SECURITY-005: Session timeout
- [x] ARCH-002: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- [x] OBSERVABILITY-001: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–ª—É—á—à–µ–Ω UX, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

### –°–ø—Ä–∏–Ω—Ç 4 (–ù–µ–¥–µ–ª—è 4): –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ SEO - 4-6 —á–∞—Å–æ–≤
- [x] OBSERVABILITY-002: Web Vitals
- [x] SEO-003: Breadcrumb schema
- [x] UX-003: Dropdown positioning
- [x] DB-001: Connection pooling
- [x] PERF-001: Filter options endpoint

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —É–ª—É—á—à–µ–Ω SEO

---

### –°–ø—Ä–∏–Ω—Ç 5 (–ù–µ–¥–µ–ª—è 5-6): –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - 15-20 —á–∞—Å–æ–≤
- [x] TEST-001: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Vitest
- [x] TEST-002: E2E —Ç–µ—Å—Ç—ã Playwright
- [x] TEST-003: API integration —Ç–µ—Å—Ç—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 70%+ code coverage, –∑–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π

---

### –°–ø—Ä–∏–Ω—Ç 6 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è - 20-25 —á–∞—Å–æ–≤
- [x] PERF-002: Redis –¥–ª—è rate limiting
- [x] PERF-003: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] ARCH-004: Shared hooks
- [x] –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Production-ready infrastructure

---

## üîó –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [Next.js Security Headers](https://nextjs.org/docs/app/api-reference/next-config-js/headers)
- [Schema.org Product](https://schema.org/Product)
- [Google Rich Results Test](https://search.google.com/test/rich-results)
- [Lighthouse CI](https://github.com/GoogleChrome/lighthouse-ci)
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [Web.dev Performance](https://web.dev/performance/)

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –ì–û–¢–û–í–ù–û–°–¢–ò –ö PRODUCTION

### Must Have (–ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º):
- [x] SECURITY-001: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—â–µ–Ω–æ
- [x] SEO-001: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π sitemap
- [x] A11Y-001: –§–æ—Ä–º—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- [x] SECURITY-003: Input validation
- [x] ARCH-001: Error boundaries
- [x] OBSERVABILITY-001: Structured logging

### Should Have (–≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞):
- [x] –í—Å–µ HIGH priority –∑–∞–¥–∞—á–∏
- [x] Web Vitals –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [x] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏
- [x] E2E —Ç–µ—Å—Ç—ã –¥–ª—è main flows

### Nice to Have (–¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ):
- [x] Full test coverage
- [x] Redis caching
- [x] Advanced monitoring
- [x] Performance optimizations

---

**–°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞:** üìù –ê–∫—Ç–∏–≤–µ–Ω
**–°–ª–µ–¥—É—é—â–∏–π review:** –ß–µ—Ä–µ–∑ 2 –Ω–µ–¥–µ–ª–∏ –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ —Å–ø—Ä–∏–Ω—Ç–∞ 1
